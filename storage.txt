import './twitchEmbed.js';
import './youtubeEmbed.js';
import { useEffect, useRef } from 'react';

export default function VideoPlayer({ id, options, type }) {

    // const twitchRef = useRef(null);
    // const youtubeRef = useRef(null);

    useEffect(() => {

        // const videoElem = twitchRef.current;

        let ytPlayer;

        function handleEmbedVideo() {

            if (type === 'twitch') {
                new Twitch.Embed(id, options);
            } else {
               ytPlayer = new YT.Player(id, options);
            }

        }

        handleEmbedVideo();

        if (type === 'youtube') return ytPlayer.destroy();

        // if (type === 'twitch' && videoElem) {
        //     console.log('I am in the return function');
        //     return () => videoElem.innerHTML = '';
        // }

    }, [id, options, type]);




    return (
        type === 'twitch' ? <div id={id}></div> : <div id={id}></div>
    );


}